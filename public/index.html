<!DOCTYPE html>
<html ng-app="ThemisComponentsApp">
  <head>
    <meta charset="utf-8">
    <title>ThemisUI</title>
    <link rel="stylesheet" type="text/css" href="/build/app.css">
    <base href="/">
  </head>
  <body ng-controller="AppController">
    <header><h2>ThemisUI</h2></header>

    <div class="content-view ng-cloak">
      <div
        class="component-list-view {{ viewType }}"
        ng-controller="ComponentListController"
        ><a
          ng-cloak
          ng-repeat="component in components"
          ng-class="{selected:selectedComponent == component}"
          ng-href="{{component}}"
          >{{ component }}</a></div>

      <div class="component-details-view" ng-controller="ComponentDetailsController">
        <div th-bind-markdown="readme.markdown"></div>
        <div ng-bind-html="readme.html"></div>

        <h2 ng-if="examples.length > 0">Examples</h2>
        <th-component-example
          ng-repeat="example in examples"
          component-name="name"
          component-example="example"/>
      </div>
    </div>

    <script src="/build/app.js"></script>

    <script>
      var host = location.hostname + ":" + location.port;
      var websocket = new WebSocket("ws://" + host + "/channel");

      // Reload page when socket closes
      websocket.onclose = function() {
        setTimeout(function() { location.reload() }, 1000);
      };
    </script>
  </body>
</html>
